<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="hamltoe.css" />

        <script type="text/javascript" src="js/underscore.min.js"></script>
        <script type="text/javascript" src="js/underscore.string.js"></script>
        <script type="text/javascript" src="js/haml.js"></script>
        <script type="text/javascript" src="js/HAMLToe.Converter.js"></script>
        <script type="text/javascript" src="js/HAMLToe.Editor.js"></script>
    </head>
    <body>
        <div class="hamltoe-panel">
            <!--<div id="hamltoe-toolbar"></div>-->
            <div class="hamltoe-controls">
                <a id="hamltoe-export">export</a>
            </div>
            <div class="hamltoe-editor">
<textarea id="hamltoe-input" class="hamltoe-input">
%h1 hello world!
</textarea>
            </div>
            <div id="hamltoe-preview" class="hamltoe-preview"></div>
        </div>

        <script type="text/javascript">
            var editor;
            (function () {
                var converter = new HAMLToe.Converter();
                editor = new HAMLToe.Editor(converter);

                editor.run();
            })();

            var line = "%0A";
            var exporter = document.getElementById("hamltoe-export");
            exporter.onclick = function() {
                this.herf = "";
                //test for a file name to use, let the user know if there's not one set and return
                this.href = "data:application/octet-stream,".concat(encodeHaml());
                this.download = "wakka.txt";
            };

            function encodeHaml() {
                return encodeURI(document.getElementById("hamltoe-input").value);
            };
        </script>
    </body>
</html>
